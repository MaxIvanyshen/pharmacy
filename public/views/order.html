
{{ block "orders" .}}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Tabletki.ua?</title>
        <script src="https://unpkg.com/htmx.org@1.9.11" integrity="sha384-0gxUXCCR8yv9FM2b+U3FDbsKthCI66oH5IA9fHppQq9DDMHuMauqq1ZHBpJxQ0J0" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    
    <body>
        {{ template "navbar" . }}
        <h2 class="h2 text-center">Orders</h2>
        {{ template "idSearch" . }}
        <br>
        {{ template "dateSearch" . }}
        <br>
        <div id="table">
            {{ template "ordersTable" . }}
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    </body>
</html>
{{ end }}

{{ block "ordersTable" . }}
    <div class="container"style="width: 75%">
       <table class="table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Medicine</th>
              <th scope="col">Price</th>
              <th scope="col">Date</th>
              <th scope="col">Cancel</th>
            </tr>
          </thead>
          <tbody>
            {{ range .Orders }}
            <tr>
              <th scope="row">{{ .ID }}</th>
              <td>
                  <ul>
                      {{ range .Meds }}
                      
                          <li>{{ .Name }} ({{ .Count }})</li>
                      {{ end }}
                  </ul>
              </td>
              <td>{{ .Price }}</td>
              <td>{{ .Date }}</td>
              <td>
                  <svg hx-target="#table" hx-delete="/api/orders/id/{{ .ID }}" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0 0 48 48">
<path fill="#f44336" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"></path><path fill="#fff" d="M29.656,15.516l2.828,2.828l-14.14,14.14l-2.828-2.828L29.656,15.516z"></path><path fill="#fff" d="M32.484,29.656l-2.828,2.828l-14.14-14.14l2.828-2.828L32.484,29.656z"></path>
</svg>
              </td>
            </tr>
            {{ end }}
          </tbody>
        </table> 
    </div>
{{ end }}

{{ block "idSearch" . }}
<div class="container">
    <p>Search order by id</p>
    <form class="form-inline" hx-target="#table" hx-get="/api/orders/id">
        <input name="id" style="width: 15%" class="form-control mr-sm-2" value="0" type="number" aria-label="Search">
        <button class="btn btn-primary" type="submit">Search</button>
    </form>
</div>
{{ end }} 

{{ block "dateSearch" . }}
<div class="container">
    <p>Search order by date</p>
    <form class="form-inline" hx-target="#table" hx-get="/api/orders/date">
        <input name="date" style="width: 25%" class="form-control mr-sm-2" value="0" type="date" aria-label="Search">
        <button class="btn btn-primary" type="submit">Search</button>
    </form>
</div>
{{ end }} 

{{ block "new_order" . }}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Tabletki.ua?</title>
        <script src="https://unpkg.com/htmx.org@1.9.11" integrity="sha384-0gxUXCCR8yv9FM2b+U3FDbsKthCI66oH5IA9fHppQq9DDMHuMauqq1ZHBpJxQ0J0" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    
    <body>
        {{ template "navbar" . }}
        <h2 class="h2 text-center">New Order</h2>
        {{ template "medsNameSearchInOrder" . }}
        <div id="table">
            {{ template "medsInOrderTable" .Meds }}
        </div>
        <div class="container">
            <h5>Current order items:</h5>
            {{ template "currentOrder" .Order }}                 
            <button hx-target="body" class="btn btn-primary" hx-post="/api/orders" type="submit">Create order</button>
        </div>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    </body>
</html>
{{ end }} 

{{ block "medsNameSearchInOrder" . }}
<div class="container">
    <p>Search medicine by name</p>
    <form class="form-inline" hx-target="body" hx-get="/api/orders/meds/name">
        <input name="name" style="width: 15%" class="form-control mr-sm-2" value="0" type="text" aria-label="Search">
        <button class="btn btn-primary" type="submit">Search</button>
    </form>
</div>
{{ end }}

{{ block "medsInOrderTable" . }}
    <div class="container"style="width: 75%">
       <table class="table">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Name</th>
              <th scope="col">Price</th>
              <th scope="col">Expiration Date</th>
              <th scope="col">Available</th>
              <th scope="col">Add to order</th>
            </tr>
          </thead>
          <tbody>
            {{ range . }}
            <tr>
              <th scope="row">{{ .ID }}</th>
              <td>{{ .Name }}</td>
              <td>{{ .Price }}</td>
              <td>{{ .ExpirationDate }}</td>
              <td>{{ .Count }}</td>
              <td>
                  <svg hx-target="body" hx-post="/api/orders/add_item/{{ .ID }}" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0 0 48 48">
                      <path fill="#4caf50" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"></path><path fill="#fff" d="M21,14h6v20h-6V14z"></path><path fill="#fff" d="M14,21h20v6H14V21z"></path>
                  </svg>
              </td>
            </tr>
            {{ end }}
          </tbody>
        </table> 
    </div>
{{ end }} 

{{ block "currentOrder" . }}
    <div>
        <ul>
            {{ range .Meds }}
            <li>{{ .Name }} ({{ .Count }})</li>
            {{ end }}
        </ul>
    </div>
    <h5>Current price <span style="font-weight: bold;">{{ .Price }}</span></h5>
{{ end }}
